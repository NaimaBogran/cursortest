<%- include('partials/header', { title: 'Rate Configuration - Meeting Tax' }) %>

<div class="rates-page">
  <div class="page-header">
    <h1>Rate Configuration</h1>
    <p class="page-subtitle">Set hourly rates by role. Add department overrides for specific teams.</p>
  </div>

  <!-- Default Rates -->
  <div class="rates-section">
    <h2>Default Rates (Organization-wide)</h2>
    <div id="default-rates" class="rates-grid">
      <p class="loading">Loading rates...</p>
    </div>
  </div>

  <!-- Department Overrides -->
  <div class="rates-section">
    <h2>Department Overrides</h2>
    <p class="section-note">Override rates for specific departments. Leave blank to use default.</p>
    
    <button class="btn btn-secondary" id="add-override-btn">+ Add Override</button>
    
    <div id="override-rates" class="overrides-list">
      <!-- Populated by JS -->
    </div>
  </div>

  <!-- Add Override Modal -->
  <div class="modal" id="override-modal" style="display: none;">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2>Add Rate Override</h2>
        <button class="modal-close" id="override-modal-close">&times;</button>
      </div>
      
      <form id="override-form">
        <div class="form-group">
          <label for="override-role">Role</label>
          <select id="override-role" required>
            <option value="">Select a role</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="override-dept">Department</label>
          <select id="override-dept" required>
            <option value="">Select a department</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="override-rate">Hourly Rate ($)</label>
          <input type="number" id="override-rate" required min="0" step="0.01" placeholder="150.00">
        </div>
        
        <div id="override-error" class="error-message" style="display: none;"></div>
        
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" id="cancel-override">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Override</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Cost Threshold Setting -->
  <div class="rates-section">
    <h2>Cost Threshold</h2>
    <p class="section-note">Meetings exceeding this cost will show a warning.</p>
    
    <div class="threshold-setting">
      <label for="cost-threshold">Threshold ($)</label>
      <input type="number" id="cost-threshold" min="0" step="100" value="2000">
      <button class="btn btn-primary" id="save-threshold">Save</button>
    </div>
  </div>
</div>

<%- include('partials/footer', { pageScript: 'rates' }) %>
